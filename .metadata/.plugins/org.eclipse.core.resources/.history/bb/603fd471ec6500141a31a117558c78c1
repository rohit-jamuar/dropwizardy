package com.dropwizard_application.resources;

import com.dropwizard_application.core.Representation;
import com.dropwizard_application.persistenceUnit.InputOutput;
import com.dropwizard_application.persistenceUnit.InputOutputDAO;
import com.google.common.base.Optional;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;

@Path("/getHash")
@Produces(MediaType.APPLICATION_JSON)
public class HashCoderResource {

	private final InputOutputDAO d;
	
	public HashCoderResource(InputOutputDAO d) { 
		this.d = d;
	}
	
	@GET
	public Representation getHashCode(@QueryParam("str") Optional<String> str)
	{
		int generatedHash = str.or("Stranger").hashCode();
		String strPassed = str.or("Stranger");
		d.create(new InputOutput(strPassed, generatedHash));
		return new Representation(generatedHash, strPassed);
	}
}
